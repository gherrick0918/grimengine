PS C:\dev\grimengine> pnpm test

> grimengine@1.0.0 test C:\dev\grimengine
> turbo run test

turbo 2.5.8

• Packages in scope: @grimengine/core, @grimengine/rules-srd
• Running test in 2 packages
• Remote caching disabled
@grimengine/core:test: cache hit, replaying logs 0b62f98b8522860e
@grimengine/core:test: 
@grimengine/core:test: > @grimengine/core@0.0.0 test C:\dev\grimengine\packages\core
@grimengine/core:test: > vitest --config vitest.config.ts
@grimengine/core:test:
@grimengine/core:test:
@grimengine/core:test:  RUN  v3.2.4 C:/dev/grimengine/packages/core
@grimengine/core:test:
@grimengine/core:test:  ✓ tests/abilityScores.test.ts (9 tests) 10ms
@grimengine/core:test:  ✓ tests/weapons.test.ts (6 tests) 11ms
@grimengine/core:test:  ✓ tests/encounter.test.ts (3 tests) 13ms
@grimengine/core:test:  ✓ tests/combat.test.ts (8 tests) 12ms
@grimengine/core:test:  ✓ tests/derived.test.ts (7 tests) 8ms
@grimengine/core:test:  ✓ tests/skills.test.ts (4 tests) 8ms
@grimengine/core:test:  ✓ tests/character.test.ts (6 tests) 11ms
@grimengine/core:test:  ✓ tests/dice.test.ts (4 tests) 7ms
@grimengine/core:test:  ✓ tests/checks.test.ts (5 tests) 8ms
@grimengine/core:test:
@grimengine/core:test:  Test Files  9 passed (9)
@grimengine/core:test:       Tests  52 passed (52)
@grimengine/core:test:    Start at  08:14:32
@grimengine/core:test:    Duration  1.49s (transform 654ms, setup 0ms, collect 1.42s, tests 89ms, environment 3ms, prepare 2.68s)
@grimengine/core:test:

 Tasks:    1 successful, 1 total
Cached:    1 cached, 1 total
  Time:    237ms >>> FULL TURBO

PS C:\dev\grimengine> pnpm dev -- character load ".\Characters\Aerin.json"                                                                           

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "load" ".\\Characters\\Aerin.json"

Loaded character Aerin (lvl 3). PB +2
PS C:\dev\grimengine> pnpm dev -- character show

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "show"

Aerin (level 3)
Proficiency Bonus: +2
Ability Scores:
  STR: 16 (+3)
  DEX: 14 (+2)
  CON: 12 (+1)
  INT: 10 (+0)
  WIS: 10 (+0)
  CHA: 8 (-1)
Weapon Proficiencies: martial
Saving Throws: STR, CON
Skills: Athletics, Perception
Passive Perception: 12

Derived:
  AC: 12    Max HP: 21 (Hit Die d8 (default))
  Default Weapon: Unarmed (fallback) (to-hit +5; damage 1d4+3)
  Note: No hit die specified; defaulting to d8.
  Note: No weapon equipped; using fallback Unarmed.
PS C:\dev\grimengine> pnpm dev -- character save --name "Aerin"

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "save" "--name" "Aerin"

Saved character "Aerin" to vault.
PS C:\dev\grimengine> pnpm dev -- character list

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "list"

Characters: Aerin
PS C:\dev\grimengine> pnpm dev -- character load-name "Aerin"

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "load-name" "Aerin"

Loaded character Aerin (lvl 3). PB +2
PS C:\dev\grimengine> pnpm dev -- character show

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "show"

Aerin (level 3)
Proficiency Bonus: +2
Ability Scores:
  STR: 16 (+3)
  DEX: 14 (+2)
  CON: 12 (+1)
  INT: 10 (+0)
  WIS: 10 (+0)
  CHA: 8 (-1)
Weapon Proficiencies: martial
Saving Throws: STR, CON
Skills: Athletics, Perception
Passive Perception: 12

Derived:
  AC: 12    Max HP: 21 (Hit Die d8 (default))
  Default Weapon: Unarmed (fallback) (to-hit +5; damage 1d4+3)
  Note: No hit die specified; defaulting to d8.
  Note: No weapon equipped; using fallback Unarmed.
PS C:\dev\grimengine> pnpm dev -- character equip --armor "Chain Mail" --shield on --weapon "Longsword" --hitdie d10

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "equip" "--armor" "Chain Mail" "--shield" "on" "--weapon" "Longsword" "--hitdie" "d10"

Updated armor: Chain Mail
Updated shield: on
Updated weapon: Longsword
Updated hit die: d10
Derived:
  AC: 18    Max HP: 25 (Hit Die d10)
  Default Weapon: Longsword (to-hit +5; damage 1d8+3; versatile 1d10+3)
PS C:\dev\grimengine> pnpm dev -- character show

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "show"

Aerin (level 3)
Proficiency Bonus: +2
Ability Scores:
  STR: 16 (+3)
  DEX: 14 (+2)
  CON: 12 (+1)
  INT: 10 (+0)
  WIS: 10 (+0)
  CHA: 8 (-1)
Weapon Proficiencies: martial
Saving Throws: STR, CON
Skills: Athletics, Perception
Passive Perception: 12

Derived:
  AC: 18    Max HP: 25 (Hit Die d10)
  Default Weapon: Longsword (to-hit +5; damage 1d8+3; versatile 1d10+3)
PS C:\dev\grimengine> pnpm dev -- character derive

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "derive"

Derived:
  AC: 18    Max HP: 25 (Hit Die d10)
  Default Weapon: Longsword (to-hit +5; damage 1d8+3; versatile 1d10+3)
PS C:\dev\grimengine> pnpm dev -- character set --level 5

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "set" "--level" "5"

Updated level: 3 → 5.
Proficiency Bonus: +3
Derived:
  AC: 18    Max HP: 39 (Hit Die d10)
  Default Weapon: Longsword (to-hit +6; damage 1d8+3; versatile 1d10+3)
PS C:\dev\grimengine> pnpm dev -- character show

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "show"

Aerin (level 5)
Proficiency Bonus: +3
Ability Scores:
  STR: 16 (+3)
  DEX: 14 (+2)
  CON: 12 (+1)
  INT: 10 (+0)
  WIS: 10 (+0)
  CHA: 8 (-1)
Weapon Proficiencies: martial
Saving Throws: STR, CON
Skills: Athletics, Perception
Passive Perception: 13

Derived:
  AC: 18    Max HP: 39 (Hit Die d10)
  Default Weapon: Longsword (to-hit +6; damage 1d8+3; versatile 1d10+3)
PS C:\dev\grimengine> pnpm dev -- encounter start --seed grim

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "encounter" "start" "--seed" "grim"

Encounter started (seed="grim").
PS C:\dev\grimengine> pnpm dev -- encounter add pc "Aerin"

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "encounter" "add" "pc" "Aerin"

Added PC Aerin (id=aerin).
PS C:\dev\grimengine> pnpm dev -- encounter list

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "encounter" "list"

Encounter encounter-grim
Round: 0 | Turn: n/a
Actors:
  [party] Aerin (id=aerin) AC 18 HP 39/39
PS C:\dev\grimengine> pnpm dev -- encounter add monster "Goblin"

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "encounter" "add" "monster" "Goblin"

Added 1 Goblin: Goblin #1 (id=goblin-1)
PS C:\dev\grimengine> pnpm dev -- encounter roll-init

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "encounter" "roll-init"

Initiative order:
1. Aerin (id=aerin) → 11 = 9 + Dex +2
2. Goblin #1 (id=goblin-1) → 5 = 3 + Dex +2
PS C:\dev\grimengine> pnpm dev -- encounter attack "Aerin" "Goblin #1" --seed grim

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "encounter" "attack" "Aerin" "Goblin #1" "--seed" "grim"

Attack: 1d20+6 vs AC 15
Rolls: [16] → natural 16 → total 22 → HIT
Damage: 1d8+3
Rolls: [4] → base 7 → final 7
Defender Goblin #1 (id=goblin-1) now has 0/7 HP (DEFEATED).
PS C:\dev\grimengine> pnpm dev -- encounter end

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "encounter" "end"

Encounter ended.
PS C:\dev\grimengine> pnpm dev -- character unload

> grimengine@1.0.0 dev C:\dev\grimengine
> tsx apps/cli/index.ts "character" "unload"

Character session cleared.
PS C:\dev\grimengine> 